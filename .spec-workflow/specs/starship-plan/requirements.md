# StarshipPlan 需求文档

## 项目概述

StarshipPlan（星舰计划）是一个专为小学生设计的习惯管理工具，通过游戏化的积分系统帮助9岁三年级学生"葫芦"养成良好的日常行为习惯。该应用提供网页端和Android移动端，通过"星币"奖励机制和等级晋升系统，让孩子在完成任务的过程中获得成就感和乐趣。

## 产品愿景

通过游戏化的方式培养孩子的自律性和时间管理能力，让习惯养成变成一场有趣的星际冒险。家长可以通过该工具引导孩子建立健康的生活作息，同时通过合理的奖励机制增强孩子的内在动力。

## 功能需求

### 需求1：用户注册与档案管理

**用户故事：** 作为家长/葫芦，我想要创建个人档案，以便管理我的习惯任务和奖励

**验收标准：**
1. 当新用户首次使用时，系统应允许创建账户（家长账户和儿童账户）
2. 当用户输入基本信息时，系统应保存用户档案包括姓名、年龄、年级等信息
3. 当家长注册时，系统应提供家长控制功能选项
4. 当葫芦注册时，系统应默认设置为儿童模式并简化界面

### 需求2：习惯任务管理系统

**用户故事：** 作为葫芦，我想要查看和完成每日/每周任务，以便获得星币奖励

**验收标准：**
1. 当葫芦登录时，系统应显示当日任务列表
2. 当葫芦完成任务时，系统应自动记录完成状态并发放相应星币
3. 当任务有时间限制时，系统应在截止时间前提醒用户
4. 当一周结束时，系统应统计本周完成情况并结算星币

**具体任务示例：**
- 每日任务：7点起床（+1星币）、完成作业（+2星币）、健身锻炼（+1星币）、整理房间（+1星币）
- 每周任务：至少3次下午7点半前完成作业并参加健身（周完成+5星币）
- 额外奖励：连续签到7天（+10星币）、月度全勤（+20星币）、习惯坚持30天（+15星币）

**星币获取预估：**
- 基础每日任务：3-5星币
- 每周挑战任务：5-10星币  
- 额外奖励：10-30星币/月
- 每月平均获取：150-200星币

### 需求3：星币积分系统

**用户故事：** 作为葫芦，我想要查看我的星币余额和获取记录，以便了解我的进步情况

**验收标准：**
1. 当葫芦完成任务时，系统应立即增加对应数量的星币到账户
2. 当用户查看积分历史时，系统应显示详细的获取记录和来源
3. 当系统结算周奖励时，系统应根据任务完成天数累计星币
4. 当星币发生变化时，系统应推送通知提醒用户

### 需求4：等级晋升系统

**用户故事：** 作为葫芦，我想要通过积累星币晋升等级，以便解锁更多特权

**验收标准：**
1. 当用户星币达到晋升标准时，系统应自动提升用户等级
2. 当用户等级变化时，系统应更新用户界面显示新等级标识
3. 当用户查看等级详情时，系统应显示当前等级权益和下一等级要求
4. 当等级提升时，系统应播放升级动画和祝贺音效

**等级系统详情：**

| 等级 | 所需累计星币 | 预计用时 | 兑换汇率 |  
|------|-------------|----------|----------|
| 平民 | 0-49星币 | - | 0.5倍 | |
| 青铜 | 50-149星币 | 1个月 | 0.75倍 |  
| 白银 | 150-399星币 | 3个月 | 1.0倍 | 
| 黄金 | 400-799星币 | 6个月 | 1.5倍 | 
| 钻石 | 800-1499星币 | 9个月 | 2 倍 | 
| 王者 | 1500星币+ | 12个月+ | 5倍 |  

**等级权益详情：**
- **平民（灰色徽章）**：基础功能
- **青铜（铜色徽章）**：任务提醒功能 + 个性化头像框
- **白银（银色徽章）**：个性化头像 + 专属主题皮肤
- **黄金（金色徽章）**：专属任务背景 + VIP任务道具 + 月度奖励翻倍
- **钻石（钻石徽章）**：全功能解锁 + 优先客服 + 季度实物奖励
- **王者（皇冠徽章）**：所有权益 + 年度大礼包 + 专属成长报告

**等级晋升规则：**
1. 新用户默认为"平民"等级，系统提供新手任务包（+20星币启动奖励）
2. 累计星币达到晋升门槛时自动升级（不会降级，等级永久有效）
3. 晋升时系统发放庆祝奖励（额外20星币 + 专属庆祝动画）
4. 每月1日根据上月活跃度发放保级星币奖励（青铜+5星币，白银+10星币，黄金+15星币，钻石+25星币，王者+50星币）
5. 生日当天额外赠送与等级匹配的星币奖励（平民10星币起，王者100星币）

**汇率说明：**
- 1星币 = 0.25元人民币（基础汇率）
- 不同等级享受不同的兑换倍率加成
- 最低兑换门槛：50星币（青铜等级）
- 每月兑换限额：王者等级不超过500元，其他等级不超过200元

### 需求5：星币兑换系统

**用户故事：** 作为葫芦，我想要将星币兑换成真实奖励，以便获得实际激励

**验收标准：**
1. 当葫芦发起兑换请求时，系统应根据当前等级计算兑换金额
2. 当家长确认兑换时，系统应记录兑换并扣除相应星币
3. 当兑换完成后，系统应更新星币余额并生成兑换记录
4. 当兑换申请待处理时，系统应通知家长进行审核

### 需求6：家长监控与控制

**用户故事：** 作为家长，我想要监控葫芦的习惯养成情况，以便提供适当引导

**验收标准：**
1. 当家长登录时，系统应显示孩子的任务完成情况和积分变化
2. 当设置任务时，家长应能够添加、修改或删除任务
3. 当兑换申请提交时，家长应收到通知并可以批准或拒绝
4. 当需要调整规则时，家长应能够修改星币奖励数量和等级要求

### 需求7：数据统计与报告

**用户故事：** 作为家长，我想要查看习惯养成报告，以便了解孩子的进步趋势

**验收标准：**
1. 当查看统计报告时，系统应显示任务完成率的变化趋势
2. 当生成周报时，系统应包含各项习惯的坚持情况和改进建议
3. 当导出数据时，系统应支持PDF格式的报告下载
4. 当对比不同时期时，系统应可视化和展示进步程度

### 需求8：跨平台同步

**用户故事：** 作为用户，我想要在不同设备上同步数据，以便随时随地管理习惯

**验收标准：**
1. 当在网页端操作时，系统应通过本地网络同步到Android端
2. 当离线操作时，系统应保存数据并在联网后自动同步
3. 当家庭网络内使用时，数据应通过局域网实时同步
4. 当同步失败时，系统应提示用户并保持数据不丢失

### 需求9：行为规范与惩罚机制

**用户故事：** 作为葫芦，我想要了解违反规则的后果，以便学会承担责任

**验收标准：**
1. 当任务未完成时，系统应根据连续未完成天数施加相应惩罚
2. 当发生违规行为时，系统应根据情节轻重扣除相应星币
3. 当用户受到惩罚时，系统应明确显示惩罚原因和持续时间
4. 当家长设置惩罚模式时，系统应根据选择调整惩罚力度

**具体惩罚规则：**
- **连续未完成惩罚**：
  - 连续3天未完成同一任务：星币获取速度-10%（持续3天）
  - 连续7天未完成同一任务：暂停该任务奖励1天
  - 连续14天未完成：建议家长调整任务难度

- **星币扣除标准**：
  - 轻微违规（虚假完成任务、严重超时）：-1星币
  - 中等违规（故意跳过任务、系统作弊）：-3至5星币
  - 严重违规（破坏系统、恶意操作）：-10至20星币

- **等级权益影响**：
  - 等级不会降级，但徽章会变暗色（持续7天）
  - 暂时丧失等级特权（VIP功能、兑换加成等）
  - 星币兑换汇率临时降低50%

- **惩罚保护机制**：
  - 每日最多扣除当日可获得星币的50%
  - 生病期间自动暂停所有惩罚
  - 家长可设置特殊情况的豁免

### 需求10：补救与恢复机制

**用户故事：** 作为葫芦，我想要通过努力弥补错误，以便重新获得奖励

**验收标准：**
1. 当用户想弥补错误时，系统应提供多种补救途径
2. 当完成补救任务时，系统应相应恢复权益或增加星币
3. 当用户表现改善时，系统应提前解除惩罚状态
4. 当家长确认孩子表现良好时，可以手动清除惩罚记录

**具体补救机制：**
- **额外补偿任务**：
  - 完成额外家务任务：+2星币/个（每周限3个）
  - 主动承认错误并道歉：+5星币（每月限1次）
  - 帮助家人或同学：+3星币/次（需家长确认）
  - 参与公益活动：+10星币（需要证明材料）

- **快速恢复通道**：
  - 连续7天全勤完成任务：立即清空所有惩罚记录
  - 主动制定并执行改进计划：+15星币奖励
  - 获得家长书面表扬：+20星币额外奖励

- **申诉与沟通**：
  - 孩子可对不公平惩罚提出申诉
  - 系统建立家长与孩子的沟通渠道
  - 定期生成行为改进建议报告

### 需求11：家长惩罚控制功能

**用户故事：** 作为家长，我想要灵活调整惩罚机制，以便适应孩子的成长需要

**验收标准：**
1. 当设置惩罚模式时，家长可选择宽松、标准、严格三种模式
2. 当孩子生病或有特殊情况时，家长可手动暂停惩罚机制
3. 当查看惩罚历史时，家长应了解孩子的改进情况
4. 当调整规则时，系统应记录变更历史和原因

**家长控制选项：**
- **惩罚力度调节**：
  - 宽松模式：减少50%惩罚力度
  - 标准模式：正常惩罚力度  
  - 严格模式：增加20%惩罚力度

- **特殊豁免设置**：
  - 疾病期间：自动暂停惩罚机制
  - 家庭旅行：可设置假期模式
  - 考试期间：降低任务要求和惩罚

- **监控与分析**：
  - 查看惩罚历史和趋势分析
  - 生成行为改进报告
  - 获得个性化教育建议

### 需求12：男孩子专属游戏化界面

**用户故事：** 作为葫芦（9岁男孩），我想要酷炫的太空冒险界面，让习惯管理变成好玩的游戏

**验收标准：**
1. 当用户登录时，系统应展示太空主题的欢迎界面和宇航员角色
2. 当查看任务时，任务应以太空探险形式呈现（如探索不同星球）
3. 当完成任务时，系统应播放太空主题的音效和动画
4. 当等级提升时，宇航员角色应更换更好的太空装备

**界面核心元素：**
- **个人太空站**：
  - 主界面为个人空间站，显示宇航员当前状态
  - 空间站可随等级提升而扩建和装饰
  - 显示星舰等级、星币数量、任务进度等信息

- **星球任务系统**：
  - 每个日常任务对应一个星球（如"起床星球"、"作业星球"）
  - 完成任务后星球被"占领"，变成绿色标记
  - 连续完成天数越长，星球开发度越高

- **太空对战元素**：
  - "拖延怪兽"、"懒惰外星人"作为未完成任务的视觉表现
  - 完成任务即"击败"怪兽，获得战斗奖励
  - 连续失败时，怪兽会"占领"星球需要重新夺回

- **装备收集系统**：
  - 不同等级解锁不同太空装备（头盔、宇航服、推进器等）
  - 特殊成就可获得稀有装备和道具
  - 装备提供视觉效果和少量属性加成

**交互体验：**
- **点击反馈**：所有按钮都有科技感的光效和声音
- **拖拽操作**：可拖拽道具到宇航员身上进行装备
- **手势识别**：Android端支持简单的手势操作（如滑动切换星球）
- **震动反馈**：完成任务和升级时有手机震动（可选）

**声音设计：**
- **语音提示**：机器人助手用男孩子喜欢的语调播报任务
- **环境音效**：太空舱的背景音、仪器运作声
- **成就音效**：解锁新装备时的特殊音乐
- **失败音效**：任务失败时的怪兽嘲笑声（激励性质）

## 非功能性需求

### 代码架构与模块化
- **单一职责原则**：每个模块应专注于单一功能领域（用户管理、任务管理、积分系统等）
- **模块化设计**：前后端分离，API接口标准化，组件可复用
- **依赖管理**：最小化模块间耦合，使用依赖注入模式
- **清晰接口**：定义统一的API规范和数据传输格式

### 性能要求
- 应用启动时间应小于5秒（家庭网络环境）
- 任务完成响应时间应小于2秒
- 支持家庭内3-5个用户同时使用
- 家庭网络内数据同步延迟应小于10秒

### 安全要求
- 家长账户密码本地存储，儿童账户无密码
- 家长控制功能需要家长密码验证
- 家庭网络内数据传输，无需HTTPS加密
- 支持数据导出备份到本地文件

### 可靠性要求
- 系统在家庭网络环境下稳定运行
- 本地数据存储，避免云端数据丢失
- 支持离线模式操作（所有基本功能可用）
- 简单的重启操作可解决大部分异常情况

### 易用性要求
- 9岁儿童应能独立完成基本操作
- 界面色彩丰富，图标直观易懂
- 支持简单的提醒通知功能
- 提供基础的操作说明和引导

### 界面设计要求（男孩子喜好导向）
- **主题风格**：太空冒险、星际探索主题，符合"星舰计划"名称
- **色彩搭配**：以深蓝、太空黑为主色调，搭配亮蓝色、橙色等科技感色彩
- **视觉元素**：
  - 星舰、飞船、火箭等图标设计
  - 行星、星星、太空背景装饰
  - 机器人助手形象作为系统引导员
  - 未来科技感的UI按钮和边框

- **角色形象**：
  - 男孩子宇航员主角，可升级换装备
  - 机器人宠物伙伴，随等级提升进化
  - 外星友军角色，代表不同习惯任务
  - 太空怪兽作为"懒惰"、"拖延"的敌人形象

- **音效设计**：
  - 任务完成：飞船发射音效、"轰隆"引擎声
  - 等级提升：未来科技感的升级音效
  - 获得星币：硬币收集或能量补充音效
  - 背景音乐：轻快的太空冒险音乐

- **动画效果**：
  - 界面切换：飞船穿梭效果
  - 任务打卡：激光扫描确认效果
  - 等级提升：宇航员装备升级动画
  - 成就解锁：星球占领或旗帜插上动画

- **个性化元素**：
  - 可自定义宇航员头像和服装
  - 可选择不同风格的星舰作为个人标识
  - 任务完成可收集太空碎片，拼装成个人空间站
  - 星币可兑换虚拟太空装备和道具

### 兼容性要求
- 网页端支持Chrome、Safari等现代浏览器
- Android端支持Android 6.0及以上版本（适配旧设备）
- 响应式设计适配手机、平板、电脑屏幕
- 仅支持中文界面（家庭内部使用）

### 技术简化要求
- **部署方式**：本地部署，无需云服务器
- **数据存储**：使用本地文件或轻量级数据库（如SQLite）
- **网络要求**：仅需家庭WiFi环境，无需外网访问
- **维护成本**：家庭成员可进行基础维护，无需专业IT知识
- **扩展性**：支持单个家庭使用，用户数不超过10人
